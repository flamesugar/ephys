<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of SchedWAVgui</title>
  <meta name="keywords" content="SchedWAVgui">
  <meta name="description" content="SchedWAVgui(callingh,filestruct)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">GUIs</a> &gt; <a href="index.html">ProtocolDesign</a> &gt; SchedWAVgui.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GUIs\ProtocolDesign&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>SchedWAVgui
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>SchedWAVgui(callingh,filestruct)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = SchedWAVgui(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> SchedWAVgui(callingh,filestruct)

 DJS 2012</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="ProtocolDesign.html" class="code" title="function varargout = ProtocolDesign(varargin)">ProtocolDesign</a>	h = ProtocolDesign</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function SchedWAVgui_OpeningFcn(hObj, evnt, h, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = SchedWAVgui_OutputFcn(hObj, evnt, h)</a></li><li><a href="#_sub3" class="code">function wav_table_Select(hObj,evnt,h)</a></li><li><a href="#_sub4" class="code">function add_file_Callback(hObj, evnt, h)</a></li><li><a href="#_sub5" class="code">function remove_file_Callback(hObj, evnt, h)</a></li><li><a href="#_sub6" class="code">function move_up_Callback(hObj, evnt, h)</a></li><li><a href="#_sub7" class="code">function move_down_Callback(hObj, evnt, h)</a></li><li><a href="#_sub8" class="code">function done_Callback(hObj, evnt, h)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = SchedWAVgui(varargin)</a>
0002 <span class="comment">% SchedWAVgui(callingh,filestruct)</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% DJS 2012</span>
0005 
0006 <span class="comment">% Last Modified by GUIDE v2.5 29-Nov-2012 23:29:14</span>
0007 
0008 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0009 gui_Singleton = 1;
0010 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0011                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0012                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction SchedWAVgui_OpeningFcn(hObj, evnt, h, varargin) ">SchedWAVgui_OpeningFcn</a>, <span class="keyword">...</span>
0013                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = SchedWAVgui_OutputFcn(hObj, evnt, h)  ">SchedWAVgui_OutputFcn</a>, <span class="keyword">...</span>
0014                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0015                    <span class="string">'gui_Callback'</span>,   []);
0016 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0017     gui_State.gui_Callback = str2func(varargin{1});
0018 <span class="keyword">end</span>
0019 
0020 <span class="keyword">if</span> nargout
0021     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0022 <span class="keyword">else</span>
0023     gui_mainfcn(gui_State, varargin{:});
0024 <span class="keyword">end</span>
0025 <span class="comment">% End initialization code - DO NOT EDIT</span>
0026 
0027 
0028 <span class="comment">% --- Executes just before SchedWAVgui is made visible.</span>
0029 <a name="_sub1" href="#_subfunctions" class="code">function SchedWAVgui_OpeningFcn(hObj, evnt, h, varargin) </a><span class="comment">%#ok&lt;INUSL&gt;</span>
0030 <span class="comment">% Choose default command line output for SchedWAVgui</span>
0031 h.output = hObj;
0032 
0033 h.CALLING_H = varargin{1}; <span class="comment">% handle of calling function</span>
0034 h.DATAIN    = varargin{2}; <span class="comment">% data input</span>
0035 
0036 <span class="comment">% Update h structure</span>
0037 guidata(hObj, h);
0038 
0039 <span class="comment">% UIWAIT makes SchedWAVgui wait for user response (see UIRESUME)</span>
0040 <span class="comment">% uiwait(h.figure1);</span>
0041 
0042 
0043 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0044 <a name="_sub2" href="#_subfunctions" class="code">function varargout = SchedWAVgui_OutputFcn(hObj, evnt, h)  </a><span class="comment">%#ok&lt;INUSL&gt;</span>
0045 
0046 <span class="comment">% Get default command line output from h structure</span>
0047 varargout{1} = h.output;
0048 
0049 
0050 
0051 
0052 
0053 
0054 
0055 <a name="_sub3" href="#_subfunctions" class="code">function wav_table_Select(hObj,evnt,h) </a><span class="comment">%#ok&lt;INUSL,DEFNU&gt;</span>
0056 <span class="keyword">if</span> isempty(evnt.Indices), <span class="keyword">return</span>; <span class="keyword">end</span>
0057 h.SELECTED_ROW = evnt.Indices(1);
0058 guidata(h.figure1,h);
0059 
0060 
0061 
0062 
0063 
0064 
0065 
0066 <a name="_sub4" href="#_subfunctions" class="code">function add_file_Callback(hObj, evnt, h) </a><span class="comment">%#ok&lt;INUSL,DEFNU&gt;</span>
0067 lastpath = getpref(<span class="string">'SchedWAVgui'</span>,<span class="string">'lastpath'</span>,cd);
0068 <span class="keyword">if</span> ~ischar(lastpath), lastpath = cd; <span class="keyword">end</span>
0069 
0070 [fn,pn] = uigetfile({<span class="string">'*.wav'</span>,<span class="string">'WAV file (*.wav)'</span>},<span class="string">'Pick a file'</span>, <span class="keyword">...</span>
0071     lastpath,<span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0072 
0073 <span class="keyword">if</span> ischar(fn), fn = {fn}; <span class="keyword">end</span>
0074 
0075 <span class="keyword">if</span> ~iscell(fn) || isempty(fn), <span class="keyword">return</span>; <span class="keyword">end</span>
0076 
0077 setpref(<span class="string">'SchedWAVgui'</span>,<span class="string">'lastpath'</span>,pn);
0078 
0079 dat = get(h.wav_table,<span class="string">'Data'</span>);
0080 S = get(h.wav_table,<span class="string">'UserData'</span>);
0081 
0082 <span class="keyword">for</span> i = 1:length(fn)
0083     pfn = fullfile(pn,fn{i});
0084     
0085     <span class="comment">% read in WAV file as double precision</span>
0086     [Y,Fs,nbits] = wavread(pfn,<span class="string">'double'</span>);
0087     
0088     <span class="comment">% store WAV data in structure</span>
0089 <span class="comment">%     s.buffer = Y';</span>
0090     s.dur    = length(Y)/Fs*1000;
0091     s.nsamps = length(Y);
0092     s.Fs     = Fs;
0093     s.nbits  = nbits;
0094     s.file   = fn{i};
0095     s.path   = pn;
0096     
0097     <span class="comment">% update table</span>
0098     <span class="keyword">if</span> isempty(dat) || isempty(dat{1})
0099         dat = {fn{i}, num2str(Fs,<span class="string">'%0.1f'</span>), num2str(s.dur,<span class="string">'%0.1f'</span>)};
0100     <span class="keyword">else</span>
0101         dat(end+1,:) = {fn{i}, num2str(Fs,<span class="string">'%0.1f'</span>), num2str(s.dur,<span class="string">'%0.1f'</span>)}; <span class="comment">%#ok&lt;AGROW&gt;</span>
0102     <span class="keyword">end</span>
0103     
0104     <span class="comment">% store all data in UserData</span>
0105     <span class="keyword">if</span> isempty(S)
0106         S = {s};
0107     <span class="keyword">else</span>
0108         S{end+1} = s; <span class="comment">%#ok&lt;AGROW&gt;</span>
0109     <span class="keyword">end</span>
0110 <span class="keyword">end</span>
0111 
0112 set(h.wav_table,<span class="string">'Data'</span>,dat,<span class="string">'UserData'</span>,S);
0113 
0114 
0115 <a name="_sub5" href="#_subfunctions" class="code">function remove_file_Callback(hObj, evnt, h) </a><span class="comment">%#ok&lt;INUSL,DEFNU&gt;</span>
0116 <span class="keyword">if</span> ~isfield(h,<span class="string">'SELECTED_ROW'</span>), <span class="keyword">return</span>; <span class="keyword">end</span>
0117 selrow = h.SELECTED_ROW;
0118 
0119 S = get(h.wav_table,<span class="string">'UserData'</span>);
0120 dat = get(h.wav_table,<span class="string">'Data'</span>);
0121 
0122 <span class="keyword">if</span> isempty(S) || isempty(dat), <span class="keyword">return</span>; <span class="keyword">end</span>
0123 
0124 <span class="keyword">if</span> selrow &gt; length(S), <span class="keyword">return</span>; <span class="keyword">end</span>
0125 
0126 S(selrow)   = [];
0127 dat(selrow,:) = [];
0128 
0129 set(h.wav_table,<span class="string">'Data'</span>,dat,<span class="string">'UserData'</span>,S);
0130 
0131 
0132 <a name="_sub6" href="#_subfunctions" class="code">function move_up_Callback(hObj, evnt, h) </a><span class="comment">%#ok&lt;INUSL,DEFNU&gt;</span>
0133 <span class="keyword">if</span> ~isfield(h,<span class="string">'SELECTED_ROW'</span>), <span class="keyword">return</span>; <span class="keyword">end</span>
0134 selrow = h.SELECTED_ROW;
0135 
0136 S = get(h.wav_table,<span class="string">'UserData'</span>);
0137 dat = get(h.wav_table,<span class="string">'Data'</span>);
0138 
0139 <span class="keyword">if</span> isempty(S) || isempty(dat), <span class="keyword">return</span>; <span class="keyword">end</span>
0140 
0141 <span class="keyword">if</span> selrow == 1, <span class="keyword">return</span>; <span class="keyword">end</span>
0142 
0143 s           = S(selrow-1);
0144 S(selrow-1) = S(selrow);
0145 S(selrow)   = s;
0146 
0147 d               = dat(selrow-1,:);
0148 dat(selrow-1,:) = dat(selrow,:);
0149 dat(selrow,:)   = d;
0150 
0151 set(h.wav_table,<span class="string">'Data'</span>,dat,<span class="string">'UserData'</span>,S);
0152 
0153 h.SELECTED_ROW = selrow-1;
0154 guidata(h.figure1,h);
0155 
0156 <a name="_sub7" href="#_subfunctions" class="code">function move_down_Callback(hObj, evnt, h) </a><span class="comment">%#ok&lt;INUSL,DEFNU&gt;</span>
0157 <span class="keyword">if</span> ~isfield(h,<span class="string">'SELECTED_ROW'</span>), <span class="keyword">return</span>; <span class="keyword">end</span>
0158 selrow = h.SELECTED_ROW;
0159 
0160 S = get(h.wav_table,<span class="string">'UserData'</span>);
0161 dat = get(h.wav_table,<span class="string">'Data'</span>);
0162 
0163 <span class="keyword">if</span> isempty(S) || isempty(dat), <span class="keyword">return</span>; <span class="keyword">end</span>
0164 
0165 <span class="keyword">if</span> selrow == length(S), <span class="keyword">return</span>; <span class="keyword">end</span>
0166 
0167 s           = S(selrow+1);
0168 S(selrow+1) = S(selrow);
0169 S(selrow)   = s;
0170 
0171 d               = dat(selrow+1,:);
0172 dat(selrow+1,:) = dat(selrow,:);
0173 dat(selrow,:)   = d;
0174 
0175 set(h.wav_table,<span class="string">'Data'</span>,dat,<span class="string">'UserData'</span>,S);
0176 
0177 h.SELECTED_ROW = selrow+1;
0178 guidata(h.figure1,h);
0179 
0180 <a name="_sub8" href="#_subfunctions" class="code">function done_Callback(hObj, evnt, h) </a><span class="comment">%#ok&lt;INUSL,DEFNU&gt;</span>
0181 S = get(h.wav_table,<span class="string">'UserData'</span>);
0182 
0183 <span class="comment">% send data to calling GUI</span>
0184 setappdata(h.CALLING_H,<span class="string">'SchedWAVgui_DATA'</span>,S);
0185 
0186 delete(h.figure1);</pre></div>
<hr><address>Generated on Wed 24-Jul-2013 19:48:12 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>